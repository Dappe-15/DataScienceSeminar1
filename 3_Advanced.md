# もっと大きなプログラムにも使える！
2章ではchatGPTへのプロンプトを工夫し、単純化することによってスマートにアプリケーション開発を行いました。  
でもそれだけじゃ物足りない方もいるのではないでしょうか？？  
今回はそんな皆様にきっと役立つAIの使い方を伝授したいと思います！！  

## 1.WBS (Work Breakdown Structure)にする
皆さんが良く利用されているアプリ、インスタグラムのようなSNSやExcelのような表計算ソフトなどいろいろあると思います。  
これらも多くの複雑なプログラムで構成されているんです！    

2章で出力させたプログラムの量とは比較にならない程膨大な量であり、これらを作ろうと思うと非常に時間もコストもかかります。  
そこで、大規模な開発においてはタスクを細分化する **WBS （Work Breakdown Structure）**　をほぼ必ず行うことになります！  

WBSとは、プロジェクト管理において、作業を階層的に整理し、細分化する手法です。プロジェクト全体を小さな作業単位に分解することで、タスクの明確化や進捗管理がしやすくなります。まさにASANAで行っていることです！  

これをチャッピー君にやらせてみましょう。なお、今回は２章で利用したチャットの続きから行っており、単純化前のアプリケーションでのWBSを行います！  

プロンプト：  
`提案していただいた、「3. 🔍 論文・コードの類似性探索ツール」についてWBSを作成してください。`  

<details><summary>出力1</summary>
承知しました。
以下に、「🔍 論文・コードの類似性探索ツール」の\*\*WBS（Work Breakdown Structure）\*\*を提示します。
WBSではプロジェクトを段階的にブレイクダウンし、**フェーズごとに作業タスク、成果物、目安の作業期間**を整理します。

---

## 🗂️ WBS：論文・コードの類似性探索ツール開発

| フェーズ              | タスク番号 | タスク名             | 内容                                          | 成果物              | 目安期間   |
| ----------------- | ----- | ---------------- | ------------------------------------------- | ---------------- | ------ |
| **0. 企画・設計**      | 0.1   | 要件定義             | ユーザーと目的の明確化、利用シナリオ整理                        | 要件定義書            | 1日     |
|                   | 0.2   | システム構成設計         | 入力→検索→出力の全体フローを決定                           | システム構成図          | 1日     |
|                   | 0.3   | 使用API・技術選定       | arXiv/GitHub/Semantic Scholar API、埋め込みモデル選定 | API・モデル仕様書       | 1日     |
| **1. データ取得**      | 1.1   | 論文検索API実装        | arXiv・Semantic Scholarから論文を検索し取得            | 論文データ取得モジュール     | 2日     |
|                   | 1.2   | GitHubコード検索API実装 | GitHubのリポジトリからコード例を検索                       | コードデータ取得モジュール    | 2日     |
| **2. 類似度評価**      | 2.1   | 埋め込み生成実装         | SentenceTransformerまたはOpenAIで埋め込み作成         | テキスト→ベクトル変換関数    | 1日     |
|                   | 2.2   | 類似度計算            | Cosine類似度でスコアを計算                            | 類似度計算モジュール       | 1日     |
|                   | 2.3   | 評価・検証            | 類似度スコアの妥当性をテスト                              | 類似度検証レポート        | 1日     |
| **3. UI / UX**    | 3.1   | 入力画面設計           | キーワード・テキスト・PDF入力UI作成                        | 入力用フォーム          | 1日     |
|                   | 3.2   | 結果表示画面           | 類似スコア付きの論文・コード表示UI                          | 結果表示コンポーネント      | 2日     |
|                   | 3.3   | 可視化オプション         | t-SNE/PCAによるマップ表示（任意）                       | 類似マップ表示          | 2日（任意） |
| **4. ロジック統合・保存**  | 4.1   | 検索履歴保存機能         | 検索履歴をローカルDBまたはJSONで保存                       | ログファイル or DB     | 1日     |
|                   | 4.2   | エクスポート機能         | BibTeX、Markdown、CSV形式で出力                    | エクスポートファイル生成     | 1日     |
| **5. テスト・ドキュメント** | 5.1   | 単体テスト            | 各モジュールのテストスクリプト作成                           | pytest等のテストスクリプト | 1日     |
|                   | 5.2   | 統合テスト            | 全体の動作確認                                     | 統合テストログ          | 1日     |
|                   | 5.3   | 利用マニュアル作成        | README、使用説明書作成                              | Markdownドキュメント   | 1日     |
| **6. デプロイ・公開**    | 6.1   | ローカル版完成          | スクリプトとして使用可能にする                             | 完成版（CLI/GUI）     | 1日     |
|                   | 6.2   | Webアプリ化（任意）      | Streamlit/FastAPIでWeb化                      | Webアプリ（β版）       | 2日（任意） |

---

### 🧮 合計作業日数目安

* **必須機能のみ**： 約 15～17日
* **オプション込み（可視化・Web化含む）**： 約 20～22日

---

### 📝 メモ

* 初期段階ではローカルCLIや簡単なStreamlit UIでも十分に実用的です。
* Web化・マップ表示は後回しにしてもOKです。
* 論文APIはarXivだけでも試作できます（Semantic ScholarはAPIキーが必要）。

---

このWBSをもとに、次は　**「システム構成図」**　または　**「コアモジュールの実装設計」**　に進むことも可能です。
ご希望があれば、進める方向をご指定ください。

</details>

------
どんなことを行っていけばよいか分かり易くなりました！  
アプリ開発においてネックになる工数計算やどんな成果物ができるのかまで丁寧に示してくれており、すごくいいですね。  
もちろん、聞けば必要なプログラムの詳細も教えてくれますし、それらのコードも書いてくれますよ！

アプリ開発だけでなく、納期のある研究においてもWBSをすることは非常に重要です。  
是非とも活かしてください。  

そして、なんとチャッピー君はあなたが作成したWBSに手直しもしてくれます。  
「一度ひな形は作ったが、詳細が詰められない...」や「実際にどのくらいの工数がかかるかわからない...」なんて時は是非チャッピー君と対話しながら、創り上げていきたいWBSをブラッシュアップしてみてはいかがでしょうか。

## 2.デバッグを行う
２章で作成してもらったコードはうまく働きました。  
しかし、チャッピー君も万能ではないので何かしら間違えたコードを出力することもあります。  
今回はその間違ったコードを直す作業である、　**デバッグ** をやってもらいましょう。  

ちなみにデバッグはデバッガーという職業の方もいらっしゃるほどに面倒で、大変な作業です。  
これがLLMの力だけで解消出来たら、今後のコーディングはもっとスピーディにできるようになると思いませんか？  

それでは間違ったコードをいくつか紹介しつつ、それらをチャッピー君に直してもらいます。  
```python
def greet(name):
  print("Hello" + name)

greet()
```
このコードでは宣言したgreet関数に引数が渡されていないので、TypeErrorが発生します。  
具体的には、
```
TypeError                                 Traceback (most recent call last)
<ipython-input-1-3107771240> in <cell line: 0>()
      2     print("Hello " + name)
      3 
----> 4 greet()

TypeError: greet() missing 1 required positional argument: 'name'
```
とターミナルにエラーメッセージが出てしまいます。  
そこで、間違ったコードとエラーメッセージを入力し、デバッグを依頼してみましょう。  

プロンプト：  
```
def greet(name):  
  print("Hello" + name)  
  
greet()  
と入力したところ、
TypeError                                 Traceback (most recent call last)  
<ipython-input-1-3107771240> in <cell line: 0>()  
      2     print("Hello " + name)  
      3   
----> 4 greet()  

TypeError: greet() missing 1 required positional argument: 'name'
と出ました。デバッグしてください。
```
<details><summary>出力2-1</summary>
このエラーは、関数 `greet()` を呼び出すときに必要な引数 `name` を渡していないために発生しています。

関数 `greet(name)` は、1つの引数 `name` を必ず受け取るように定義されています。しかし、`greet()` のように引数なしで呼び出すと、Python は「必要な引数が足りません」として `TypeError` を出します。

---

### ✅ 修正方法①: 引数を渡す

```python
def greet(name):
    print("Hello " + name)

greet("Alice")  # 例として "Alice" を渡す
```

### ✅ 修正方法②: デフォルト引数を使う（引数が省略されたとき用の初期値を設定）

```python
def greet(name="Guest"):
    print("Hello " + name)

greet()         # 引数なしでもOK（"Hello Guest" と表示）
greet("Bob")    # 引数を渡せばそれも使える（"Hello Bob" と表示）
```

---

### 💡補足：

Python では、関数を定義するときに引数が必要なら、**必ずその数の引数を渡す必要があります**。省略可能にしたい場合は、`name="Guest"` のようにデフォルト値を設定しましょう。

必要であれば、あなたの目的に合わせてどちらの修正が良いかアドバイスします！

</details>

------
なんと、正しいコードをいくつか提案してくれるだけでなく、どうしてエラーが出ているのかまで解説してくれるんです！  
デバッグの勉強にもなるのですごいですよね!!!  


それではもう一つ。

```python
def say_hello():
print("Hello") 
```
このコードには一見気づきにくいミスがあります。
Pythonでは他の多くのプログラミング言語とは異なり、**インデント（字下げ）**　が非常に重要な役割を果たします。

特に、def を使って関数を定義する際には、その関数内の処理を必ずインデントして記述する必要があります。
この例では、print("Hello") の前にインデントがないため、構文エラーとなってしまいます。

このようなインデント忘れは、Python初心者がよくつまずくポイントのひとつです。
このままでは
```
  File "<ipython-input-4-4278062587>", line 2
    print("Hello")
    ^
IndentationError: expected an indented block after function definition on line 1
```
と出力されてしまいます。  
それでは先ほどと同じようにコードとエラーメッセージを入力し、デバッグしてもらいましょう。  

プロンプト：  
```
def say_hello():
print("Hello")
と入力したところ、
  File "<ipython-input-4-4278062587>", line 2
    print("Hello")
    ^
IndentationError: expected an indented block after function definition on line 1
と出力されました。デバッグしてください。
```

<details><summary>出力2-2</summary>
エラーメッセージ：

```
IndentationError: expected an indented block after function definition on line 1
```

は、「関数の定義のあとにインデントされたブロックが必要ですよ」という意味です。

あなたのコードはこちら：

```python
def say_hello():
print("Hello")
```

このコードの `print("Hello")` の部分が **インデントされていない** ため、Python が構文エラーを出しています。

---

### ✅ 修正後のコード：

```python
def say_hello():
    print("Hello")
```

関数の内部では、必ず **半角スペース4つ**（またはTab1つ）でインデントを入れる必要があります。

---

### ✅ 実行方法：

```python
def say_hello():
    print("Hello")

say_hello()
```

これを実行すると、次のように表示されます：

```
Hello
```

---

何か他にもエラーが出ていたり、複数行のコードで直し方に悩んでいたら、遠慮なく聞いてください！
</details>

------
と、完璧に修正してくれました！  
実際のコードは[こちら](https://colab.research.google.com/drive/14unse600rpJCEHFm6Tqob9qBaF5AJCqa?usp=sharing)を参考にしてください！

### ちなみに...
簡単なコードであればエラーメッセージが無くても、コードだけでデバッグをしてくれます。  
エラーメッセージがあるに越したことはありませんが、自分で書いたプログラムが無限ループに陥らないかを先に確かめたいなどあれば、それらも修正してくれることでしょう！  

## 3.見える化したい！
色々な計画や道筋を立てたはいいものの、複雑すぎて理解・記憶できていないなんてことはありませんか？  
いくら完璧な計画を立てたとしてもそれらを文字として覚えるのは難しいですよね...  
そこで、今回はチャッピー君の画像生成の力を借りて、画像として理解できるようにしたいと思います！
ここに計画の一例を示してみますね。

---
### 🔷 超複雑な計画：プロジェクト「Ω」全体像

1. **目標設定フェーズ**

   * ミッション定義
   * 成功基準の明確化
   * 関係者ヒアリング

2. **戦略設計フェーズ**

   * 長期戦略（1年）
   * 中期マイルストーン（3ヶ月）
   * 短期タスク（週単位）

3. **リソース配分フェーズ**

   * 人的リソースの配置
   * ツール／システム選定
   * 予算の分配

4. **実行フェーズ**

   * チームごとのタスク進行
   * 週次レビュー
   * リスク対応（イレギュラー処理）

5. **評価・改善フェーズ**

   * KPI測定
   * フィードバック回収
   * プランの再調整

---

文章だけ見ると「…うっ」となってしまいますが、ここでチャッピー君の出番です！

この全体像を**フローチャート**や**マインドマップ**のような形に可視化すれば、一目でどこに何があるのか理解しやすくなりますよね。  
次に、この構造を記憶させてから、チャッピー君に**図解生成**をお願いしてみましょう！


プロンプト1：  
`この計画をフローチャートにして画像として出力してください。`  

<summary>出力3-1</summary>  
<img src = "https://github.com/user-attachments/assets/9c0fca5d-a8f9-491c-bfd8-294a24bca6aa" width =50%>


プロンプト2：  
`この計画をマインドマップにして画像として出力してください。`  

<summary>出力3-2</summary>  
<img src = "https://github.com/user-attachments/assets/da7b580a-8da8-478c-8206-8e4625f0a347" width =50%>


一部漢字が気持ち悪いですが、十分読める程度ですよね！  
この様に、入力データを元に画像を作ることもお手の物なんです!!  

### ちなみに
chatGPTやCopilotでは画像の出力だけでなく、画像の入力も行えます。  
言葉では言いにくい事を上手く伝えたい時には、画像をアップロードしてプロンプトを入力することも考えてみましょう！
